{% extends "base.html" %}

{% block title %}Logic-Guard-Layer - Home{% endblock %}

{% block extra_css %}
<style>
    /* Remove spacing between title and status */
    .terminal-header {
        padding-bottom: 0.5rem;
    }
    .terminal-content {
        padding-top: 0.5rem;
    }
    .system-info {
        margin-top: 0;
        margin-bottom: 0.5rem;
    }
    .terminal-divider {
        margin: 0.5rem 0;
    }
    .description {
        margin-top: 0;
    }

    /* Start Validation button - orange background */
    .terminal-button.primary {
        background-color: #ffb000 !important;
        border-color: #ffb000 !important;
        color: #0a0a0a !important;
        text-shadow: none !important;
    }
    .terminal-button.primary:hover {
        background-color: #ffcc33 !important;
        border-color: #ffcc33 !important;
    }
    .terminal-button.primary .button-icon {
        color: #0a0a0a !important;
    }

    /* Ensure buttons are fully visible */
    .action-buttons {
        margin-bottom: 2rem;
        padding-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="terminal-container">
    <div class="terminal-header">
        <span class="prompt">&gt;</span> SYSTEM INITIALIZATION COMPLETE
    </div>

    <div class="terminal-content">
        <div class="system-info">
            <span class="info-item"><span class="label">STATUS:</span> <span class="success">ONLINE</span></span>
            <span class="info-item"><span class="label">VERSION:</span> {{ version }}</span>
            <span class="info-item"><span class="label">MODEL:</span> <span id="model-name">Loading...</span></span>
            <span class="info-item"><span class="label">API:</span> <span id="api-status">Checking...</span></span>
        </div>

        <div class="terminal-divider"></div>

        <div class="description">
            <p class="typing-effect"><span class="prompt">&gt;</span> Logic-Guard-Layer is a neuro-symbolic validation system that combines LLM capabilities with ontology-based reasoning to detect and correct logical inconsistencies in technical maintenance documents.</p>
        </div>

        <div class="action-buttons">
            <a href="/validate" class="terminal-button primary">
                <span class="button-icon">&gt;</span> START VALIDATION
            </a>
            <a href="/ontology" class="terminal-button">
                <span class="button-icon">&gt;</span> VIEW CONSTRAINTS
            </a>
        </div>
    </div>
</div>

<script>
    // Fetch system info
    fetch('/api/info')
        .then(r => r.json())
        .then(data => {
            document.getElementById('model-name').textContent = data.model;
            const apiStatus = document.getElementById('api-status');
            if (data.api_configured) {
                apiStatus.textContent = 'CONFIGURED';
                apiStatus.className = 'success';
            } else {
                apiStatus.textContent = 'NOT CONFIGURED';
                apiStatus.className = 'error';
            }
        })
        .catch(() => {
            document.getElementById('model-name').textContent = 'ERROR';
            document.getElementById('api-status').textContent = 'ERROR';
        });
</script>
{% endblock %}
